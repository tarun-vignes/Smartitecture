<Window x:Class="Smartitecture.UI.ChatWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Smartitecture AI Chat" Height="700" Width="900"
        WindowStartupLocation="CenterScreen"
        Background="{StaticResource Brush.AppBackground}"
        FontFamily="Segoe UI Variable Text, Segoe UI, Arial"
        Foreground="#F5F7FF">
    
    <Window.Resources>
        <!-- Chat Message Styles -->
        <Style x:Key="UserMessageStyle" TargetType="Border">
            <Setter Property="Background" Value="#0078D4"/>
            <Setter Property="CornerRadius" Value="15,15,5,15"/>
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="Margin" Value="50,5,10,5"/>
            <Setter Property="HorizontalAlignment" Value="Right"/>
        </Style>
        
        <Style x:Key="AssistantMessageStyle" TargetType="Border">
            <Setter Property="Background" Value="#2D2D30"/>
            <Setter Property="CornerRadius" Value="15,15,15,5"/>
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="Margin" Value="10,5,50,5"/>
            <Setter Property="HorizontalAlignment" Value="Left"/>
        </Style>
        
        <Style x:Key="SystemMessageStyle" TargetType="Border">
            <Setter Property="Background" Value="#404040"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="8,4"/>
            <Setter Property="Margin" Value="20,5,20,5"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
        </Style>
    </Window.Resources>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Header with Model Selection -->
        <Border Grid.Row="0" Style="{StaticResource Card.Glass}" Padding="16">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <TextBlock Text="🤖 AI Assistant" 
                                
                               FontSize="18" 
                               FontWeight="Bold"
                               VerticalAlignment="Center"/>
                    <TextBlock Name="ModelStatusText"
                               Text="(Azure OpenAI)"
                               Foreground="#90EE90"
                               FontSize="12"
                               Margin="10,0,0,0"
                               VerticalAlignment="Center"/>
                </StackPanel>
                
                <ComboBox Grid.Column="1" 
                          Name="ModelSelector"
                          Width="150"
                          Margin="10,0"
                          SelectionChanged="ModelSelector_SelectionChanged">
                    <ComboBoxItem Content="Azure OpenAI" IsSelected="True"/>
                    <ComboBoxItem Content="Local Model"/>
                    <ComboBoxItem Content="Fallback"/>
                </ComboBox>
                
                <Button Grid.Column="2" Name="ClearChatButton" Content="Clear Chat" Click="ClearChatButton_Click" Padding="10,6" Style="{StaticResource Button.Glass}"/>
            </Grid>
        </Border>
        
        <!-- Chat Messages Area -->
        <ScrollViewer Grid.Row="1" 
                      Name="ChatScrollViewer"
                      Background="Transparent"
                      VerticalScrollBarVisibility="Auto"
                      HorizontalScrollBarVisibility="Disabled">
            <StackPanel Name="ChatMessagesPanel" Margin="10">
                <!-- Welcome Message -->
                <Border Style="{StaticResource SystemMessageStyle}">
                    <TextBlock Text="🏗️ Welcome to Smartitecture AI Assistant! I can help you with automation, system commands, and more."
                               Foreground="#B0B0B0"
                               FontSize="12"
                               TextWrapping="Wrap"
                               HorizontalAlignment="Center"/>
                </Border>
            </StackPanel>
        </ScrollViewer>
        
        <!-- Typing Indicator -->
        <Border Grid.Row="2" 
                Name="TypingIndicator"
                Style="{StaticResource Card.Glass}"
                Padding="15,8"
                Visibility="Collapsed">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="🤖 AI is typing" 
                           Foreground="#90EE90" 
                           FontSize="12"/>
                <TextBlock Name="TypingDots" 
                           Text="..." 
                           Foreground="#90EE90" 
                           FontSize="12"
                           Margin="5,0,0,0"/>
            </StackPanel>
        </Border>
        
        <!-- Input Area -->
        <Border Grid.Row="3" Style="{StaticResource Card.Glass}" Padding="16">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <TextBox Grid.Column="0"
                         Name="MessageInput"
                         
                         
                         
                         Padding="12,8"
                         FontSize="14"
                         AcceptsReturn="True"
                         MaxHeight="100"
                         VerticalScrollBarVisibility="Auto"
                         KeyDown="MessageInput_KeyDown"
                         TextWrapping="Wrap"
                         Text="Type your message or command here..."/>
                
                <Button Grid.Column="1"
                        Name="AttachButton" Content="Attach" Width="90" Height="40" Margin="10,0,5,0" Style="{StaticResource Button.Glass}" Click="AttachButton_Click" ToolTip="Attach file or screenshot"/>
                
                <Button Grid.Column="2"
                        Name="SendButton" Content="Send" Width="90" Height="40" Style="{StaticResource Button.Primary}" Click="SendButton_Click" IsDefault="True"/>
            </Grid>
        </Border>
    </Grid>
</Window>
