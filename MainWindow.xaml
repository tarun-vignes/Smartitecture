<Window x:Class="SmartitectureSimple.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Smartitecture - AI Agent Desktop Application" 
        Height="500" Width="700"
        WindowStartupLocation="CenterScreen"
        Background="#1E1E1E">
    
    <Grid Margin="20,20,20,20">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        
        <!-- Main Content Area -->
        <Grid Grid.Column="0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
        
        <!-- Title -->
        <TextBlock Grid.Row="0" 
                   Text="🎉 Smartitecture Simple - It Works! 🎉"
                   FontSize="24" FontWeight="Bold"
                   Foreground="White" HorizontalAlignment="Center"
                   Margin="0,0,0,20"/>
        
        <!-- Status -->
        <TextBlock Grid.Row="1" 
                   x:Name="StatusText"
                   Text="Python Backend: Not Started"
                   FontSize="14" Foreground="Orange"
                   HorizontalAlignment="Center"
                   Margin="0,0,0,15"/>
        
        <!-- Progress Indicator for Multi-Step Tasks -->
        <StackPanel Grid.Row="1" Orientation="Vertical" HorizontalAlignment="Center" Margin="0,25,0,0" x:Name="ProgressPanel" Visibility="Collapsed">
            <TextBlock x:Name="ProgressText" Text="Step 1 of 3: Taking screenshot..." 
                       FontSize="12" Foreground="#00D4FF" HorizontalAlignment="Center" Margin="0,0,0,5"/>
            <ProgressBar x:Name="ProgressBar" Width="300" Height="8" 
                         Background="#3D3D3D" Foreground="#00D4FF" 
                         Minimum="0" Maximum="100" Value="33"/>
        </StackPanel>
        
        <!-- Input/Output Area -->
        <Border x:Name="InputOutputContainer" Grid.Row="3" Background="#2D2D2D" CornerRadius="5" Padding="10,10,10,10">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                
                <TextBlock Grid.Row="0" Text="Input:" Foreground="White" FontWeight="Bold" Margin="0,0,0,5"/>
                <TextBox Grid.Row="1" x:Name="InputTextBox" 
                         Background="#3D3D3D" Foreground="White" 
                         BorderBrush="#555" BorderThickness="1"
                         Padding="8,8,8,8" FontSize="12"
                         Text="Hello from the simplified Smartitecture app!"
                         Margin="0,0,0,10"/>
                
                <TextBlock Grid.Row="2" Text="Output:" Foreground="White" FontWeight="Bold" Margin="0,10,0,5"/>
                <TextBox Grid.Row="3" x:Name="OutputTextBox"
                         Background="#3D3D3D" Foreground="LightGreen"
                         BorderBrush="#555" BorderThickness="1"
                         Padding="8,8,8,8" FontSize="12"
                         IsReadOnly="True"
                         Text="Click 'Start Backend' then 'Run Agent' to test the connection..."
                         TextWrapping="Wrap"/>
            </Grid>
        </Border>
        
        <!-- Control Buttons -->
        <StackPanel Grid.Row="4" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,15,0,0">
            <Button x:Name="StartBackendButton" Content="Start Python Backend" 
                    Background="#0078D4" Foreground="White" 
                    Padding="15,8,15,8" Margin="0,0,10,0"
                    Click="StartBackendButton_Click"/>
            <Button x:Name="RunAgentButton" Content="Run Agent" 
                    Background="#107C10" Foreground="White"
                    Padding="15,8,15,8" Margin="10,0,10,0"
                    Click="RunAgentButton_Click" IsEnabled="False"/>
            <Button x:Name="StopBackendButton" Content="Stop Backend"
                    Background="#D13438" Foreground="White"
                    Padding="15,8,15,8" Margin="10,0,10,0"
                    Click="StopBackendButton_Click" IsEnabled="False"/>
            <Button x:Name="SettingsButton" Content="⚙️ Settings" 
                    Background="#6B46C1" Foreground="White"
                    Padding="15,8,15,8" Margin="10,0,10,0"
                    Click="SettingsButton_Click"/>
            <Button Name="PluginManagerButton" Content="🔌 Plugins" 
                    Background="#9966CC" Margin="5" Padding="10,5" 
                    FontWeight="Bold" Foreground="White" 
                    Click="PluginManagerButton_Click"/>
                    
            <Button Name="WorkflowDesignerButton" Content="🎨 Workflow Designer" 
                    Background="#FF6B35" Margin="5" Padding="10,5" 
                    FontWeight="Bold" Foreground="White" 
                    Click="WorkflowDesignerButton_Click"/>
            <Button x:Name="AboutButton" Content="ℹ️ About" 
                    Background="#0066CC" Foreground="White"
                    Padding="15,8,15,8" Margin="0,0,0,0"
                    Click="AboutButton_Click"/>
        </StackPanel>
        
            <!-- Footer -->
            <TextBlock Grid.Row="5" 
                       Text="Smartitecture v1.0 - Professional AI Agent Desktop Application"
                       FontSize="12" Foreground="LightGray"
                       HorizontalAlignment="Center" Margin="0,15,0,0"/>
        </Grid>
        
        <!-- Command History Panel -->
        <Border Grid.Column="1" Background="#2D2D2D" CornerRadius="5" Margin="10,0,0,0">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                
                <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="10,10,10,5">
                    <TextBlock Text="📜 Command History" 
                               Foreground="White" FontWeight="Bold" 
                               FontSize="14" VerticalAlignment="Center"/>
                    <Button x:Name="ClearHistoryButton" Content="🗑️" 
                            Background="#D13438" Foreground="White"
                            Padding="5,2,5,2" Margin="10,0,0,0"
                            FontSize="10" ToolTip="Clear History"
                            Click="ClearHistoryButton_Click"/>
                </StackPanel>
                
                <ScrollViewer Grid.Row="1" Margin="10,5,10,10" 
                              VerticalScrollBarVisibility="Auto">
                    <ListBox x:Name="CommandHistoryListBox" 
                             Background="Transparent" 
                             BorderThickness="0"
                             SelectionChanged="CommandHistoryListBox_SelectionChanged">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <Border Background="Transparent" Padding="2" Margin="0,1,0,1">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <TextBlock Grid.Column="0" Text="{Binding}" 
                                                   Foreground="LightGray" 
                                                   TextWrapping="Wrap" 
                                                   Margin="5,2,5,2" 
                                                   FontSize="11"
                                                   Cursor="Hand"
                                                   MouseLeftButtonUp="CommandHistoryItem_Click"/>
                                        
                                        <Button Grid.Column="1" Content="❌" 
                                                Background="Transparent" 
                                                Foreground="#FF6B6B"
                                                BorderThickness="0"
                                                Padding="3,1,3,1" 
                                                Margin="2,0,2,0"
                                                FontSize="8" 
                                                ToolTip="Delete this command"
                                                Click="DeleteSingleCommand_Click"
                                                Tag="{Binding}"
                                                Cursor="Hand"/>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </ScrollViewer>
            </Grid>
        </Border>
        
        <!-- Settings Panel Overlay -->
        <Grid x:Name="SettingsOverlay" Grid.RowSpan="6" Visibility="Collapsed" Background="#90000000">
            <Border Background="#2D2D2D" CornerRadius="10" 
                    BorderBrush="#555" BorderThickness="2"
                    Width="500" Height="400" 
                    HorizontalAlignment="Center" VerticalAlignment="Center">
                <Border.Effect>
                    <DropShadowEffect Color="Black" BlurRadius="20" ShadowDepth="5" Opacity="0.5"/>
                </Border.Effect>
                
                <Grid Margin="20">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    
                    <!-- Settings Header -->
                    <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,20">
                        <TextBlock Text="⚙️ Settings" FontSize="20" FontWeight="Bold" 
                                   Foreground="White" VerticalAlignment="Center"/>
                        <Button x:Name="CloseSettingsButton" Content="✕" 
                                Background="Transparent" Foreground="#FF6B6B"
                                BorderThickness="0" FontSize="16" FontWeight="Bold"
                                Width="30" Height="30" 
                                HorizontalAlignment="Right" 
                                Margin="320,0,0,0"
                                Click="CloseSettingsButton_Click"/>
                    </StackPanel>
                    
                    <!-- Settings Content -->
                    <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                        <StackPanel>
                            <!-- Theme Settings -->
                            <GroupBox Header="Theme" Foreground="White" Margin="0,0,0,15">
                                <StackPanel Margin="10">
                                    <RadioButton x:Name="SystemThemeRadio" Content="🖥️ System (Auto)" 
                                                 Foreground="White" IsChecked="True" Margin="0,5,0,5"
                                                 ToolTip="Automatically match Windows light/dark mode"/>
                                    <RadioButton x:Name="DarkThemeRadio" Content="🌙 Dark Theme" 
                                                 Foreground="White" Margin="0,5,0,5"/>
                                    <RadioButton x:Name="LightThemeRadio" Content="☀️ Light Theme" 
                                                 Foreground="White" Margin="0,5,0,5"/>
                                    <RadioButton x:Name="BlueThemeRadio" Content="🔵 Blue Theme" 
                                                 Foreground="White" Margin="0,5,0,5"/>
                                </StackPanel>
                            </GroupBox>
                            
                            <!-- Backend Settings -->
                            <GroupBox Header="Backend Configuration" Foreground="White" Margin="0,0,0,15">
                                <StackPanel Margin="10">
                                    <StackPanel Orientation="Horizontal" Margin="0,5,0,5">
                                        <TextBlock Text="Port:" Foreground="White" Width="80" VerticalAlignment="Center"/>
                                        <TextBox x:Name="BackendPortTextBox" Text="8001" Width="100" 
                                                 Background="#3D3D3D" Foreground="White" BorderBrush="#555"/>
                                    </StackPanel>
                                    <StackPanel Orientation="Horizontal" Margin="0,5,0,5">
                                        <TextBlock Text="Timeout:" Foreground="White" Width="80" VerticalAlignment="Center"/>
                                        <TextBox x:Name="BackendTimeoutTextBox" Text="30" Width="100" 
                                                 Background="#3D3D3D" Foreground="White" BorderBrush="#555"/>
                                        <TextBlock Text="seconds" Foreground="LightGray" Margin="5,0,0,0" VerticalAlignment="Center"/>
                                    </StackPanel>
                                    <CheckBox x:Name="AutoStartBackendCheckBox" Content="Auto-start backend" 
                                              Foreground="White" IsChecked="True" Margin="0,5,0,5"/>
                                </StackPanel>
                            </GroupBox>
                            
                            <!-- UI Preferences -->
                            <GroupBox Header="UI Preferences" Foreground="White" Margin="0,0,0,15">
                                <StackPanel Margin="10">
                                    <CheckBox x:Name="ShowProgressIndicatorsCheckBox" Content="Show progress indicators" 
                                              Foreground="White" IsChecked="True" Margin="0,5,0,5"/>
                                    <CheckBox x:Name="ShowCommandHistoryCheckBox" Content="Show command history panel" 
                                              Foreground="White" IsChecked="True" Margin="0,5,0,5"/>
                                    <CheckBox x:Name="MinimizeToTrayCheckBox" Content="Minimize to system tray" 
                                              Foreground="White" Margin="0,5,0,5"/>
                                </StackPanel>
                            </GroupBox>
                        </StackPanel>
                    </ScrollViewer>
                    
                    <!-- Action Buttons -->
                    <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,20,0,0">
                        <Button x:Name="SaveSettingsButton" Content="Save" 
                                Background="#107C10" Foreground="White"
                                Padding="20,8,20,8" Margin="0,0,10,0"
                                Click="SaveSettingsButton_Click"/>
                        <Button x:Name="CancelSettingsButton" Content="Cancel" 
                                Background="#6C757D" Foreground="White"
                                Padding="20,8,20,8"
                                Click="CancelSettingsButton_Click"/>
                    </StackPanel>
                </Grid>
            </Border>
        </Grid>
    </Grid>
</Window>
